package info.kwarc.sally;

import info.kwarc.sally.core.SallyInteraction;
import info.kwarc.sally.core.comm.SallyModelRequest;
import info.kwarc.sally.injection.Configuration;
import info.kwarc.sally.networking.CometD;
import info.kwarc.sally.networking.Injection.ProductionNetworking;
import info.kwarc.sally.networking.interfaces.IConnectionManager;
import info.kwarc.sally.planetary.Planetary;
import info.kwarc.sally.spreadsheet.ASMEditor;
import info.kwarc.sissi.bpm.injection.ProductionLocalKnowledgeBase;
import info.kwarc.sissi.bpm.injection.ProductionSallyActions;

import java.io.FileOutputStream;
import java.util.List;

import sally.AlexData;
import sally.CADAlexClick;
import sally.SallyFrame;
import sally.ScreenCoordinates;
import sally_comm.MessageUtils;

import com.google.inject.Guice;
import com.google.inject.Injector;
import com.hp.hpl.jena.rdf.model.Model;
import com.hp.hpl.jena.rdf.model.ModelFactory;

/**
 * This is a sample file to launch a process.
 */
public class ProcessMain {

	public static final void main(String[] args) throws Exception {
		Injector i = Guice.createInjector(
				new Configuration(),
				//new ProductionRemoteKnowledgeBase(), 
				new ProductionLocalKnowledgeBase(), 
				new ProductionSallyActions(),
				new ProductionNetworking()
		);

		SallyInteraction interaction = i.getInstance(SallyInteraction.class);
		interaction.registerServices(i.getInstance(Planetary.class));
		interaction.registerServices(i.getInstance(PricingService.class));
		interaction.registerServices(i.getInstance(ASMEditor.class));
		
		IConnectionManager conn = i.getInstance(IConnectionManager.class);

		CometD cometD = i.getInstance(CometD.class);
		cometD.start();

		//ConnectionPlayer player = i.getInstance(IConnectionPlayerFactory.class).create(new FileReader("rec_spreadsheet.json"));
		//player.start();

		conn.newClient("spread");
		conn.newMessage("spread", MessageUtils.createDesktopSpreadsheetAlex());

		AlexData alexData = AlexData.newBuilder().setFileName("file://pipe-end.xls").setData("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GAEQSAoQCgwKBggCEA4YBBABGAEQSCAXCiYKEAoMCgYIARAEGAgQARgBEBYKEAoMCgYIARAEGAkQARgBEBYgCAo4ChAKDAoGCAIQEhgGEAEYARBoChAKDAoGCAIQExgGEAEYARBoChAKDAoGCAIQFBgGEAEYARBpICYKJgoQCgwKBggCEA8YARABGAEQVwoQCgwKBggCEBAYARABGAEQVyAaEvADCgwIFAgVCBYIFwgYCBMSEAoMCgYIAhAHGAAQARgBEE8SEAoMCgYIAhAIGAAQARgBEFASEAoMCgYIAhAJGAAQARgBEFESEAoMCgYIAhAKGAAQARgBEFISEAoMCgYIAhALGAAQARgBEFMSEAoMCgYIAhAMGAAQARgBEFQSEAoMCgYIAhANGAAQARgBEFUSEAoMCgYIAhAOGAAQARgBEFYaKAoMCgYIAhALGAAQARgBEhgIFAgVCBYIFwgYCBMQQBBBEEUQSBBNED8aKAoMCgYIAhAIGAAQARgBEhgIFAgVCBYIFwgYCBMQQBBBEEMQRxBKED8aKAoMCgYIAhAKGAAQARgBEhgIFAgVCBYIFwgYCBMQQBBBEEMQSBBMED8aKAoMCgYIAhAJGAAQARgBEhgIFAgVCBYIFwgYCBMQQBBBEEQQSBBLED8aKAoMCgYIAhAMGAAQARgBEhgIFAgVCBYIFwgYCBMQQBBBEEQQSBBOED8aKAoMCgYIAhAHGAAQARgBEhgIFAgVCBYIFwgYCBMQQBBBEEMQRhBJED8aKAoMCgYIAhANGAAQARgBEhgIFAgVCBYIFwgYCBMQQBBCEEQQSBBLED8aKAoMCgYIAhAOGAAQARgBEhgIFAgVCBYIFwgYCBMQQBBCEEQQSBBOED8gGRLSAgoOCAEIAggDCAQIBQgGCAgSEAoMCgYIARAHGAkQARgBECcSEAoMCgYIARAIGAkQARgBECgSEAoMCgYIARAJGAkQARgBECkSEAoMCgYIARAKGAkQARgBECoSEAoMCgYIARALGAkQARgBECsaLAoMCgYIARAJGAkQARgBEhwIAQgCCAMIBAgFCAYICBAIEAwQDhAQEBIQFBAWGiwKDAoGCAEQCBgJEAEYARIcCAEIAggDCAQIBQgGCAgQBxALEA0QEBAREBMQFhosCgwKBggBEAcYCRABGAESHAgBCAIIAwgECAUIBggIEAYQCxAN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bWV0cmljdGhyZWFkP3NJU09oZXh0aHJlYWQSZwgjEmNodHRwczovL3RudC5rd2FyYy5pbmZvL3JlcG9zL3N0Yy9mY2FkL2ZsYW5nZS9jZHMvZmxhbmdlLWJvbHQtZ2Fza2V0Lm9tZG9jP2ZsYW5nZS1ib2x0LWdhc2tldD9mbGFuZ2USbAggEmhodHRwczovL3RudC5rd2FyYy5pbmZvL3JlcG9zL3N0Yy9mY2FkL2ZsYW5nZS9jZHMvZmxhbmdlLWJvbHQtZ2Fza2V0Lm9tZG9jP2ZsYW5nZS1ib2x0LWdhc2tldD9nYXNrZXQtdHlwZRJtCCgSaWh0dHBzOi8vdG50Lmt3YXJjLmluZm8vcmVwb3Mvc3RjL2ZjYWQvZmxhbmdlL2Nkcy9mbGFuZ2UtYm9sdC1nYXNrZXQub21kb2M/ZmxhbmdlLWJvbHQtZ2Fza2V0P2JsaW5kLWZsYW5nZRJcCBkSWGh0dHBzOi8vdG50Lmt3YXJjLmluZm8vcmVwb3Mvc3RjL2ZjYWQvZmxhbmdlL2Nkcy9wYXJ0bnVtYmVyLm9tZG9jP3BhcnRudW1iZXI/cGFydC1udW1iZXISTQgcEklodHRwczovL3RudC5rd2FyYy5pbmZvL3JlcG9zL3N0Yy9mY2FkL2ZsYW5nZS9jZHMvY29sb3JzLm9tZG9jP2NvbG9yP2NvbG9yEkoIDRJGaHR0cHM6Ly90bnQua3dhcmMuaW5mby9yZXBvcy9zdGMvZmNhZC9mbGFuZ2UvY2RzL2Nvc3Qub21kb2M/Y29zdD90b3RhbBItCBASKWh0dHA6Ly9pbmZvLmt3YXJjLnNpc3NpLndpbm9ncmFkL3ZlbmRvci1BEk0IAxJJaHR0cHM6Ly90bnQua3dhcmMuaW5mby9yZXBvcy9zdGMvZmNhZC9mbGFuZ2UvY2RzL2NvbG9ycy5vbWRvYz9jb2xvcj9jb2xvchJJCCsSRWh0dHBzOi8vdG50Lmt3YXJjLmluZm8vcmVwb3Mvc3RjL2ZjYWQvZmxhbmdlL2Nkcy9jb3N0Lm9tZG9jP2Nvc3Q/Y29zdBJJCB0SRWh0dHBzOi8vdG50Lmt3YXJjLmluZm8vcmVwb3Mvc3RjL2ZjYWQvZmxhbmdlL2Nkcy9jb3N0Lm9tZG9jP2Nvc3Q/Y29zdBJKCAsSRmh0dHBzOi8vdG50Lmt3YXJjLmluZm8vcmVwb3Mvc3RjL2ZjYWQvZmxhbmdlL2Nkcy9jb3N0Lm9tZG9jP2Nvc3Q/dG90YWwSTAgKEkhodHRwczovL3RudC5rd2FyYy5pbmZvL3JlcG9zL3N0Yy9mY2FkL2ZsYW5nZS9jZHMvY29zdC5vbWRvYz9jb3N0P2J5cGllY2USaAgVEmRodHRwczovL3RudC5rd2FyYy5pbmZvL3JlcG9zL3N0Yy9mY2FkL2ZsYW5nZS9jZHMvSVNPbWV0cmljdGhyZWFkLm9tZG9jP0lTT21ldHJpY3RocmVhZD9zSVNPaGV4dGhyZWFkEmEIAhJdaHR0cHM6Ly90bnQua3dhcmMuaW5mby9yZXBvcy9zdGMvZmNhZC9mbGFuZ2UvY2RzL0lTT2hleHRocmVhZC5vbWRvYz9JU09oZXh0aHJlYWQ/SVNPaGV4dGhyZWFkEkwIDhJIaHR0cHM6Ly90bnQua3dhcmMuaW5mby9yZXBvcy9zdGMvZmNhZC9mbGFuZ2UvY2RzL2Nvc3Qub21kb2M/Y29zdD9ieXBpZWNlEk8IFBJLaHR0cHM6Ly90bnQua3dhcmMuaW5mby9yZXBvcy9zdGMvZmNhZC9mbGFuZ2UvY2RzL251dGJvbHQub21kb2M/bnV0Ym9sdD9ib2x0EkwIDBJIaHR0cHM6Ly90bnQua3dhcmMuaW5mby9yZXBvcy9zdGMvZmNhZC9mbGFuZ2UvY2RzL2Nvc3Qub21kb2M/Y29zdD9ieXBpZWNlElwILBJYaHR0cHM6Ly90bnQua3dhcmMuaW5mby9yZXBvcy9zdGMvZmNhZC9mbGFuZ2UvY2RzL3BhcnRudW1iZXIub21kb2M/cGFydG51bWJlcj9wYXJ0LW51bWJlchJcCB4SWGh0dHBzOi8vdG50Lmt3YXJjLmluZm8vcmVwb3Mvc3RjL2ZjYWQvZmxhbmdlL2Nkcy9wYXJ0bnVtYmVyLm9tZG9jP3BhcnRudW1iZXI/cGFydC1udW1iZXISXAgiElhodHRwczovL3RudC5rd2FyYy5pbmZvL3JlcG9zL3N0Yy9mY2FkL2ZsYW5nZS9jZHMvcGFydG51bWJlci5vbWRvYz9wYXJ0bnVtYmVyP3BhcnQtbnVtYmVyEkwICRJIaHR0cHM6Ly90bnQua3dhcmMuaW5mby9yZXBvcy9zdGMvZmNhZC9mbGFuZ2UvY2RzL3ZlbmRvcnMub21kb2M/dmVuZG9ycz9DElkIARJVaHR0cHM6Ly90bnQua3dhcmMuaW5mby9yZXBvcy9zdGMvZmNhZC9mbGFuZ2UvY2RzL2NvbXBvbmVudHMub21kb2M/Y29tcG9uZW50P2NvbXBvbmVudBJNCCUSSWh0dHBzOi8vdG50Lmt3YXJjLmluZm8vcmVwb3Mvc3RjL2ZjYWQvZmxhbmdlL2Nkcy9jb2xvcnMub21kb2M/Y29sb3I/Y29sb3ISaAgbEmRodHRwczovL3RudC5rd2FyYy5pbmZvL3JlcG9zL3N0Yy9mY2FkL2ZsYW5nZS9jZHMvSVNPbWV0cmljdGhyZWFkLm9tZG9jP0lTT21ldHJpY3RocmVhZD9zSVNPaGV4dGhyZWFkEkkIGBJFaHR0cHM6Ly90bnQua3dhcmMuaW5mby9yZXBvcy9zdGMvZmNhZC9mbGFuZ2UvY2RzL2Nvc3Qub21kb2M/Y29zdD9jb3N0Em4IHxJqaHR0cHM6Ly90bnQua3dhcmMuaW5mby9yZXBvcy9zdGMvZmNhZC9mbGFuZ2UvY2RzL2ZsYW5nZS1ib2x0LWdhc2tldC5vbWRvYz9mbGFuZ2UtYm9sdC1nYXNrZXQ/ZmxhbmdlLWdhc2tldBJMCAcSSGh0dHBzOi8vdG50Lmt3YXJjLmluZm8vcmVwb3Mvc3RjL2ZjYWQvZmxhbmdlL2Nkcy92ZW5kb3JzLm9tZG9jP3ZlbmRvcnM/QRJVCAQSUWh0dHBzOi8vdG50Lmt3YXJjLmluZm8vcmVwb3Mvc3RjL2ZjYWQvZmxhbmdlL2Nkcy9JU09oZXhib2x0Lm9tZG9jP0lTT2hleGJvbHQ/aGVhZBJJCCESRWh0dHBzOi8vdG50Lmt3YXJjLmluZm8vcmVwb3Mvc3RjL2ZjYWQvZmxhbmdlL2Nkcy9jb3N0Lm9tZG9jP2Nvc3Q/Y29zdBJoCCkSZGh0dHBzOi8vdG50Lmt3YXJjLmluZm8vcmVwb3Mvc3RjL2ZjYWQvZmxhbmdlL2Nkcy9JU09tZXRyaWN0aHJlYWQub21kb2M/SVNPbWV0cmljdGhyZWFkP3NJU09oZXh0aHJlYWQSVQgGElFodHRwczovL3RudC5rd2FyYy5pbmZvL3JlcG9zL3N0Yy9mY2FkL2ZsYW5nZS9jZHMvcXVhbnRpdHkub21kb2M/cXVhbnRpdHk/cXVhbnRpdHkSVwgFElNodHRwczovL3RudC5rd2FyYy5pbmZvL3JlcG9zL3N0Yy9mY2FkL2ZsYW5nZS9jZHMvY29tcF90eXBlcy5vbWRvYz9jb21wdHlwZT9jb21wdHlwZRJNCCoSSWh0dHBzOi8vdG50Lmt3YXJjLmluZm8vcmVwb3Mvc3RjL2ZjYWQvZmxhbmdlL2Nkcy9jb2xvcnMub21kb2M/Y29sb3I/Y29sb3ISTQgWEklodHRwczovL3RudC5rd2FyYy5pbmZvL3JlcG9zL3N0Yy9mY2FkL2ZsYW5nZS9jZHMvY29sb3JzLm9tZG9jP2NvbG9yP2NvbG9yEk8IExJLaHR0cHM6Ly90bnQua3dhcmMuaW5mby9yZXBvcy9zdGMvZmNhZC9mbGFuZ2UvY2RzL3ZlbmRvci5vbWRvYz92ZW5kb3I/dmVuZG9yElUIFxJRaHR0cHM6Ly90bnQua3dhcmMuaW5mby9yZXBvcy9zdGMvZmNhZC9mbGFuZ2UvY2RzL0lTT2hleGJvbHQub21kb2M/SVNPaGV4Ym9sdD9oZWFkEkwICBJIaHR0cHM6Ly90bnQua3dhcmMuaW5mby9yZXBvcy9zdGMvZmNhZC9mbGFuZ2UvY2RzL3ZlbmRvcnMub21kb2M/dmVuZG9ycz9CElwIJxJYaHR0cHM6Ly90bnQua3dhcmMuaW5mby9yZXBvcy9zdGMvZmNhZC9mbGFuZ2UvY2RzL3BhcnRudW1iZXIub21kb2M/cGFydG51bWJlcj9wYXJ0LW51bWJlchJJCCYSRWh0dHBzOi8vdG50Lmt3YXJjLmluZm8vcmVwb3Mvc3RjL2ZjYWQvZmxhbmdlL2Nkcy9jb3N0Lm9tZG9jP2Nvc3Q/Y29zdBJaCBoSVmh0dHBzOi8vdG50Lmt3YXJjLmluZm8vcmVwb3Mvc3RjL2ZjYWQvZmxhbmdlL2Nkcy9JU09oZXhudXQub21kb2M/SVNPaGV4bnV0P0lTTy1oZXgtbnV0EkoIDxJGaHR0cHM6Ly90bnQua3dhcmMuaW5mby9yZXBvcy9zdGMvZmNhZC9mbGFuZ2UvY2RzL2Nvc3Qub21kb2M/Y29zdD90b3RhbBIzCBISL2h0dHA6Ly9pbmZvLmt3YXJjLnNpc3NpLndpbm9ncmFkL2Rpc2NvdW50LXJhdGVz").build();
		conn.newMessage("spread", alexData);

		conn.newClient("cad");
		conn.newMessage("cad", MessageUtils.createDesktopCADAlex());

		alexData = AlexData.newBuilder().setFileName("pipe-end.iam").setData("Ci9EOlxrd2FyY1xGb3JtYWxDQURcRXhhbXBsZXNcbW9kZWxzXHBpcGUtZW5kLmlhbRLwCwoEcm9vdBoTChFjb3JydWdhdGVkLXBpcGU6MRp7Cg5ibGluZCBmbGFuZ2U6MRJpaHR0cHM6Ly90bnQua3dhcmMuaW5mby9yZXBvcy9zdGMvZmNhZC9mbGFuZ2UvY2RzL2ZsYW5nZS1ib2x0LWdhc2tldC5vbWRvYz9mbGFuZ2UtYm9sdC1nYXNrZXQ/YmxpbmQtZmxhbmdlGmEKBmJvbHQ6MRJLaHR0cHM6Ly90bnQua3dhcmMuaW5mby9yZXBvcy9zdGMvZmNhZC9mbGFuZ2UvY2RzL251dGJvbHQub21kb2M/bnV0Ym9sdD9ib2x0IgoKBGFyZzESAjEwGmsKBW51dDoxElZodHRwczovL3RudC5rd2FyYy5pbmZvL3JlcG9zL3N0Yy9mY2FkL2ZsYW5nZS9jZHMvSVNPaGV4bnV0Lm9tZG9jP0lTT2hleG51dD9JU08taGV4LW51dCIKCgRhcmcxEgIxMBp2CghnYXNrZXQ6MRJqaHR0cHM6Ly90bnQua3dhcmMuaW5mby9yZXBvcy9zdGMvZmNhZC9mbGFuZ2UvY2RzL2ZsYW5nZS1ib2x0LWdhc2tldC5vbWRvYz9mbGFuZ2UtYm9sdC1nYXNrZXQ/ZmxhbmdlLWdhc2tldBphCgZib2x0OjISS2h0dHBzOi8vdG50Lmt3YXJjLmluZm8vcmVwb3Mvc3RjL2ZjYWQvZmxhbmdlL2Nkcy9udXRib2x0Lm9tZG9jP251dGJvbHQ/Ym9sdCIKCgRhcmcxEgIxMBprCgVudXQ6MhJWaHR0cHM6Ly90bnQua3dhcmMuaW5mby9yZXBvcy9zdGMvZmNhZC9mbGFuZ2UvY2RzL0lTT2hleG51dC5vbWRvYz9JU09oZXhudXQ/SVNPLWhleC1udXQiCgoEYXJnMRICMTAaYQoGYm9sdDozEktodHRwczovL3RudC5rd2FyYy5pbmZvL3JlcG9zL3N0Yy9mY2FkL2ZsYW5nZS9jZHMvbnV0Ym9sdC5vbWRvYz9udXRib2x0P2JvbHQiCgoEYXJnMRICMTAaawoFbnV0OjMSVmh0dHBzOi8vdG50Lmt3YXJjLmluZm8vcmVwb3Mvc3RjL2ZjYWQvZmxhbmdlL2Nkcy9JU09oZXhudXQub21kb2M/SVNPaGV4bnV0P0lTTy1oZXgtbnV0IgoKBGFyZzESAjEwGmEKBmJvbHQ6NBJLaHR0cHM6Ly90bnQua3dhcmMuaW5mby9yZXBvcy9zdGMvZmNhZC9mbGFuZ2UvY2RzL251dGJvbHQub21kb2M/bnV0Ym9sdD9ib2x0IgoKBGFyZzESAjEwGmsKBW51dDo0ElZodHRwczovL3RudC5rd2FyYy5pbmZvL3JlcG9zL3N0Yy9mY2FkL2ZsYW5nZS9jZHMvSVNPaGV4bnV0Lm9tZG9jP0lTT2hleG51dD9JU08taGV4LW51dCIKCgRhcmcxEgIxMBphCgZib2x0OjUSS2h0dHBzOi8vdG50Lmt3YXJjLmluZm8vcmVwb3Mvc3RjL2ZjYWQvZmxhbmdlL2Nkcy9udXRib2x0Lm9tZG9jP251dGJvbHQ/Ym9sdCIKCgRhcmcxEgIxMBprCgVudXQ6NRJWaHR0cHM6Ly90bnQua3dhcmMuaW5mby9yZXBvcy9zdGMvZmNhZC9mbGFuZ2UvY2RzL0lTT2hleG51dC5vbWRvYz9JU09oZXhudXQ/SVNPLWhleC1udXQiCgoEYXJnMRICMTAaYQoGYm9sdDo2EktodHRwczovL3RudC5rd2FyYy5pbmZvL3JlcG9zL3N0Yy9mY2FkL2ZsYW5nZS9jZHMvbnV0Ym9sdC5vbWRvYz9udXRib2x0P2JvbHQiCgoEYXJnMRICMTAaawoFbnV0OjYSVmh0dHBzOi8vdG50Lmt3YXJjLmluZm8vcmVwb3Mvc3RjL2ZjYWQvZmxhbmdlL2Nkcy9JU09oZXhudXQub21kb2M/SVNPaGV4bnV0P0lTTy1oZXgtbnV0IgoKBGFyZzESAjEw").build();
		conn.newMessage("cad", alexData);

		
		SallyInteraction sally = i.getInstance(SallyInteraction.class);
		List<Model> models = sally.getPossibleInteractions("/get/semantics", new SallyModelRequest(), Model.class);
		Model common = ModelFactory.createDefaultModel();
		for (Model mod : models) {
			common.add(mod);
		}
		
		FileOutputStream file = new FileOutputStream("cad-model.rdf");
		common.write(file);
		file.close();
		
		CADAlexClick click = CADAlexClick.newBuilder().setFileName("pipe-end.iam").setCadNodeId("bolt:1").setPosition(ScreenCoordinates.newBuilder().setX(100).setY(100).build()).build();
		conn.newMessage("cad", click);

		SallyFrame frame =  SallyFrame.newBuilder().setFileName("pipe-end.iam").build();
		conn.newMessage("cad", frame);
		
		//conn.close();
		//BPMNUtils.showStatus(i.getInstance(ISallyKnowledgeBase.class).getKnowledgeSession());
	}

}